<?xml version="1.0" encoding="utf-8"?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from urdf/sailboat_gazebo.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<!-- Basic WAM-V with gazebo plugins for dynamics -->
<robot name="NBOAT">
  <!-- HULL DESCRIPTION -->
  <link name="base_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <mesh filename="package://sailboat_description/mesh/pt90.stl"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="0 0 0.0"/>
      <geometry>
        <mesh filename="package://sailboat_description/mesh/pt90.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <mass value="50.0"/>
      <inertia ixx="0.3" ixy="0.0" ixz="0.0" iyy="3.5" iyz="0.0" izz="3.6"/>
    </inertial>
  </link>
  <!-- RUDDER DESCRIPTION -->
  <link name="rudder">
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <collision name="collision">
      <geometry>
        <mesh filename="package://sailboat_description/mesh/rudder.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
    </collision>
    <visual name="visual">
      <geometry>
        <mesh filename="package://sailboat_description/mesh/rudder.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
    </visual>
  </link>
  <joint name="rudder_joint" type="revolute">
    <parent link="base_link"/>
    <child link="rudder"/>
    <origin rpy="0 0 0" xyz="-0.4 0 0.0"/>
    <dynamics damping="1.0"/>
    <axis xyz="0 0 1"/>
    <limit effort="50" lower="-1.0471975512" upper="1.0471975512" velocity="5"/>
  </joint>
  <!-- SAIL DESCRIPTION -->
  <link name="sail">
    <inertial>
      <mass value="2.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <collision name="collision">
      <geometry>
        <mesh filename="package://sailboat_description/mesh/sail.dae"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0.0 0 0.0"/>
    </collision>
    <visual name="visual">
      <geometry>
        <mesh filename="package://sailboat_description/mesh/sail.dae"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0.0 0 0.0"/>
    </visual>
  </link>
  <joint name="sail_joint" type="revolute">
    <parent link="base_link"/>
    <child link="sail"/>
    <origin rpy="0 0 0" xyz="0.25 0 0.0"/>
    <dynamics damping="1.0"/>
    <axis xyz="0 0 1"/>
    <limit effort="30" lower="-1.57079632679" upper="1.57079632679" velocity="5"/>
  </joint>
  <!-- KEEL DESCRIPTION -->
  <link name="keel">
    <inertial>
      <mass value="10.0" xyz="0 0 0.0"/>
      <inertia ixx="0.05" ixy="0.0" ixz="0.0" iyy="0.05" iyz="0.0" izz="0.005"/>
    </inertial>
    <collision name="collision">
      <geometry>
        <mesh filename="package://sailboat_description/mesh/keel.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
    <visual name="visual">
      <geometry>
        <mesh filename="package://sailboat_description/mesh/keel.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </visual>
  </link>
  <joint name="keel_joint" type="revolute">
    <parent link="base_link"/>
    <child link="keel"/>
    <origin rpy="0 0 0" xyz="0 0 0.0"/>
    <axis xyz="0 0 1"/>
    <limit effort="50" lower="0" upper="0" velocity="0"/>
  </joint>
  <link name="sailboat/center_engine_link">
    <visual>
      <geometry>
        <mesh filename="package://wamv_description/models/engine/mesh/engine.dae"/>
      </geometry>
    </visual>
    <collision name="center_engine_vertical_axis_collision">
      <origin rpy="0 0 0" xyz="-0.16 0 -0.24"/>
      <geometry>
        <box size="0.2 0.15 0.83"/>
      </geometry>
    </collision>
    <collision name="center_engine_rear_end_collision">
      <origin rpy="0 0 0" xyz="-0.34 0 0.12"/>
      <geometry>
        <box size="0.12 0.15 0.12"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="15"/>
      <inertia ixx="0.889245" ixy="0.0" ixz="0.0" iyy="0.911125" iyz="0.0" izz="0.078125"/>
    </inertial>
  </link>
  <link name="sailboat/center_propeller_link">
    <visual>
      <geometry>
        <mesh filename="package://wamv_description/models/propeller/mesh/propeller.dae"/>
      </geometry>
    </visual>
    <collision name="center_propeller_collision">
      <origin rpy="0 1.57 0" xyz="-0.08 0 0"/>
      <geometry>
        <cylinder length="0.18" radius="0.24"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.008545" ixy="0.0" ixz="0.0" iyy="0.008545" iyz="0.0" izz="0.0144"/>
    </inertial>
  </link>
  <joint name="sailboat/center_chasis_engine_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="10" lower="-3.14159265359" upper="3.14159265359" velocity="10"/>
    <origin rpy="0 0 0" xyz="-0.5 0 0.0"/>
    <parent link="sailboat/base_link"/>
    <child link="sailboat/center_engine_link"/>
  </joint>
  <joint name="sailboat/center_engine_propeller_joint" type="continuous">
    <axis rpy="0 0 0" xyz="1 0 0"/>
    <parent link="sailboat/center_engine_link"/>
    <child link="sailboat/center_propeller_link"/>
    <origin rpy="0 0 0" xyz="-0.278156 0 -0.509371"/>
    <limit effort="100" velocity="100"/>
    <dynamics damping="0.05" friction="0.05"/>
  </joint>
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control">
      <robotNamespace>/sailboat</robotNamespace>
    </plugin>
    <plugin filename="libsailboat_gazebo.so" name="rudder">
      <a0>0</a0>
      <alpha_stall>1.5707963268</alpha_stall>
      <cla>0.12</cla>
      <cda>0.01</cda>
      <cp>-3.0 0 -0.5</cp>
      <area>2.0</area>
      <air_density>1000</air_density>
      <forward>1 0 0</forward>
      <upward>0 -1 0</upward>
      <link_name>rudder</link_name>
      <verbose>0</verbose>
    </plugin>
    <plugin filename="libsailboat_gazebo_sail.so" name="sail">
      <a0>0</a0>
      <alpha_stall>1.5707963268</alpha_stall>
      <cla>2.12</cla>
      <cda>1.5</cda>
      <cp>0.0 0 0.0</cp>
      <area>1.0</area>
      <air_density>1.2041</air_density>
      <forward>-1 0 0</forward>
      <upward>0 1 0</upward>
      <link_name>sail</link_name>
      <verbose>1</verbose>
    </plugin>
    <plugin filename="libusv_gazebo_thrust_plugin.so" name="wamv_gazebo_thrust">
      <cmdTimeout>1.0</cmdTimeout>
      <robotNamespace>sailboat</robotNamespace>
      <thruster>
        <!-- Required Parameters -->
        <linkName>sailboat/center_propeller_link</linkName>
        <propJointName>sailboat/center_engine_propeller_joint</propJointName>
        <engineJointName>sailboat/center_chasis_engine_joint</engineJointName>
        <cmdTopic>thrusters/center_thrust_cmd</cmdTopic>
        <angleTopic>thrusters/center_thrust_angle</angleTopic>
        <enableAngle>True</enableAngle>
        <!-- Optional Parameters -->
        <mappingType>1</mappingType>
        <maxCmd>1.0</maxCmd>
        <maxForceFwd>250.0</maxForceFwd>
        <maxForceRev>-100.0</maxForceRev>
        <maxAngle>1.57079632679</maxAngle>
      </thruster>
    </plugin>
  </gazebo>
  <transmission name="sail_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <actuator name="sail_act">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="sail_joint">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>
  <transmission name="rudder_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <actuator name="rudder_act">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="rudder_joint">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>
  <!--Gazebo Plugin for simulating WAM-V dynamics-->
  <gazebo>
    <plugin filename="libusv_gazebo_dynamics_plugin.so" name="usv_dynamics_sailboat_dynamics_plugin">
      <bodyName>base_link</bodyName>
      <!-- Must be same as the ocean model!-->
      <waterLevel>0</waterLevel>
      <waterDensity>997.8</waterDensity>
      <!-- Added mass -->
      <xDotU>0.0</xDotU>
      <yDotV>0.0</yDotV>
      <nDotR>0.0</nDotR>
      <!-- Linear and quadratic drag -->
      <xU>51.3</xU>
      <xUU>72.4</xUU>
      <yV>40.0</yV>
      <yVV>0.0</yVV>
      <zW>2000.0</zW>
      <zWW>500.0</zWW>
      <kP>50.0</kP>
      <mQ>50.0</mQ>
      <nR>400.0</nR>
      <nRR>0.0</nRR>
      <!-- General dimensions -->
      <!--<boatArea>2.2</boatArea>-->
      <hullRadius>1.0</hullRadius>
      <boatWidth>1.2</boatWidth>
      <boatLength>2</boatLength>
      <!-- Length discretization, AKA, "N" -->
      <length_n>2</length_n>
      <!-- Wave model -->
      <wave_model>ocean_waves</wave_model>
    </plugin>
  </gazebo>
  <!-- Attach wind plugin -->
  <!--<xacro:usv_wind_gazebo name="sailboat_wind_plugin"/>-->
</robot>
